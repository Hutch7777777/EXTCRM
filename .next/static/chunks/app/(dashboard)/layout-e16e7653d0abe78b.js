(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{63:(e,a,r)=>{"use strict";var t=r(7260);r.o(t,"usePathname")&&r.d(a,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}})},857:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>D});var t=r(5155),s=r(2115),n=r(1847);let i=(0,n.A)("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),l=(0,n.A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),o=(0,n.A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),d=(0,n.A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),c=(0,n.A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),u=(0,n.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var m=r(3998),h=r(5142),f=r(4269);let x=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,f.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...s})});x.displayName="Avatar";let g=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("img",{ref:a,className:(0,f.cn)("aspect-square h-full w-full",r),...s})});g.displayName="AvatarImage";let p=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,f.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted text-sm font-medium",r),...s})});p.displayName="AvatarFallback";var v=r(1647),y=r(2545);function j(e){var a,r;let{onMenuToggle:n}=e,[f,g]=(0,s.useState)(!1),[j,b]=(0,s.useState)(""),{user:w,currentRole:N,signOut:k,loading:_}=(0,y.A)(),A=async()=>{try{await k()}catch(e){console.error("Error signing out:",e)}};return _||!w?(0,t.jsx)("header",{className:"crm-header",children:(0,t.jsx)("div",{className:"animate-pulse bg-gray-200 rounded h-8 w-32"})}):(0,t.jsxs)("header",{className:"crm-header",children:[(0,t.jsx)(m.$,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:n,children:(0,t.jsx)(i,{className:"h-5 w-5"})}),(0,t.jsx)("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:(0,t.jsx)("form",{className:"flex flex-1 max-w-lg",onSubmit:e=>{e.preventDefault(),console.log("Search query:",j)},children:(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsx)(l,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(h.p,{type:"search",placeholder:"Search contacts, leads, jobs...",className:"pl-10 bg-background",value:j,onChange:e=>b(e.target.value)})]})})}),(0,t.jsxs)("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:[(0,t.jsxs)(m.$,{variant:"ghost",size:"icon",className:"relative",children:[(0,t.jsx)(o,{className:"h-5 w-5"}),(0,t.jsx)(v.E,{variant:"destructive",className:"absolute -right-1 -top-1 h-5 w-5 rounded-full p-0 text-xs",children:"3"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(m.$,{variant:"ghost",className:"relative h-8 w-8 rounded-full p-0",onClick:()=>g(!f),children:(0,t.jsx)(x,{className:"h-8 w-8",children:(0,t.jsxs)(p,{children:[null==(a=w.first_name)?void 0:a[0],null==(r=w.last_name)?void 0:r[0]]})})}),f&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>g(!1)}),(0,t.jsxs)("div",{className:"absolute right-0 top-full z-50 mt-2 w-56 rounded-md border bg-popover p-1 shadow-md",children:[(0,t.jsxs)("div",{className:"px-2 py-1.5",children:[(0,t.jsxs)("p",{className:"text-sm font-medium",children:[w.first_name," ",w.last_name]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:w.email}),N&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground capitalize",children:N.replace("_"," ")})]}),(0,t.jsx)("div",{className:"h-px bg-border my-1"}),(0,t.jsxs)(m.$,{variant:"ghost",className:"w-full justify-start gap-2 px-2",onClick:()=>{g(!1)},children:[(0,t.jsx)(d,{className:"h-4 w-4"}),"Profile"]}),(0,t.jsxs)(m.$,{variant:"ghost",className:"w-full justify-start gap-2 px-2",onClick:()=>{g(!1)},children:[(0,t.jsx)(c,{className:"h-4 w-4"}),"Settings"]}),(0,t.jsx)("div",{className:"h-px bg-border my-1"}),(0,t.jsxs)(m.$,{variant:"ghost",className:"w-full justify-start gap-2 px-2",onClick:()=>{g(!1),A()},children:[(0,t.jsx)(u,{className:"h-4 w-4"}),"Sign out"]})]})]})]})]})]})}var b=r(2619),w=r.n(b),N=r(63);let k=(0,n.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_=(0,n.A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),A=(0,n.A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),z=(0,n.A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function M(e){let{className:a}=e,[r,n]=(0,s.useState)(!1),[i,l]=(0,s.useState)(!1),{currentOrganization:o,organizations:d,switchOrganization:c,loading:u}=(0,y.A)(),h=e=>e.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2),v=async e=>{if(!o||e===o.id)return void n(!1);l(!0);try{await c(e),n(!1)}catch(e){console.error("Error switching organization:",e)}finally{l(!1)}};return u||!o?(0,t.jsxs)("div",{className:(0,f.cn)("flex items-center gap-2 p-2",a),children:[(0,t.jsx)(_,{className:"h-4 w-4 animate-spin"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading..."})]}):(0,t.jsxs)("div",{className:(0,f.cn)("relative",a),children:[(0,t.jsxs)(m.$,{variant:"ghost",role:"combobox","aria-expanded":r,className:"w-full justify-between bg-background hover:bg-accent",onClick:()=>n(!r),disabled:i,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[i?(0,t.jsx)(_,{className:"h-4 w-4 animate-spin"}):(0,t.jsxs)(x,{className:"h-6 w-6",children:[(0,t.jsx)(g,{src:o.logo_url||void 0}),(0,t.jsx)(p,{className:"text-xs",children:h(o.name)})]}),(0,t.jsx)("span",{className:"truncate text-sm font-medium",children:o.name})]}),(0,t.jsx)(A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]}),r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),(0,t.jsxs)("div",{className:"absolute left-0 right-0 top-full z-50 mt-1 max-h-60 overflow-auto rounded-md border bg-popover p-1 shadow-md",children:[null==d?void 0:d.map(e=>{let a=e.id===o.id;return(0,t.jsxs)("div",{className:(0,f.cn)("flex cursor-pointer items-center gap-2 rounded-sm px-2 py-2 text-sm hover:bg-accent",a&&"bg-accent",i&&"pointer-events-none opacity-50"),onClick:()=>v(e.id),children:[(0,t.jsx)(x,{className:"h-6 w-6",children:(0,t.jsx)(p,{className:"text-xs",children:h(e.name)})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"font-medium truncate",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground capitalize",children:e.role.replace("_"," ")})]}),a&&(0,t.jsx)(z,{className:"h-4 w-4"})]},e.id)}),(!d||0===d.length)&&(0,t.jsx)("div",{className:"px-2 py-6 text-center text-sm",children:"No organizations found."})]})]})]})}let C=(0,n.A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);var E=r(1169),S=r(6583),R=r(9633),P=r(9715),$=r(6485);let H=(0,n.A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),q=(0,n.A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),F=[{name:"Main",items:[{name:"Dashboard",href:"/dashboard",icon:C,roles:["owner","operations_manager","sales_manager","estimating_manager","estimator","field_management"]}]},{name:"CRM",items:[{name:"Contacts",href:"/contacts",icon:E.A,roles:["owner","operations_manager","sales_manager"]},{name:"Leads",href:"/leads",icon:S.A,roles:["owner","operations_manager","sales_manager"]},{name:"Jobs",href:"/jobs",icon:R.A,roles:["owner","operations_manager","sales_manager","estimating_manager","field_management"]},{name:"Estimates",href:"/estimates",icon:P.A,roles:["owner","operations_manager","sales_manager","estimating_manager","estimator"]}]},{name:"Business",items:[{name:"Calendar",href:"/calendar",icon:$.A,roles:["owner","operations_manager","sales_manager","field_management"]},{name:"Reports",href:"/reports",icon:H,roles:["owner","operations_manager","sales_manager","estimating_manager"]},{name:"Field Management",href:"/field",icon:q,roles:["owner","operations_manager","field_management"]}]},{name:"Settings",items:[{name:"Organization",href:"/settings/organization",icon:c,roles:["owner","operations_manager"]},{name:"Users",href:"/settings/users",icon:E.A,roles:["owner"]}]}];function O(e){var a,r;let{isOpen:s,onClose:n}=e,i=(0,N.usePathname)(),{user:l,currentRole:o,loading:d}=(0,y.A)();if(d||!l||!o)return null;let c=F.map(e=>({...e,items:e.items.filter(e=>e.roles.includes(o))})).filter(e=>e.items.length>0);return(0,t.jsxs)(t.Fragment,{children:[s&&(0,t.jsx)("div",{className:"fixed inset-0 z-40 lg:hidden",onClick:n}),(0,t.jsxs)("div",{className:(0,f.cn)("crm-sidebar transform transition-transform duration-300 ease-in-out lg:translate-x-0",s?"translate-x-0":"-translate-x-full"),children:[(0,t.jsxs)("div",{className:"flex h-16 items-center justify-between px-6 lg:hidden",children:[(0,t.jsx)("span",{className:"text-lg font-semibold",children:"Menu"}),(0,t.jsx)(m.$,{variant:"ghost",size:"icon",onClick:n,children:(0,t.jsx)(k,{className:"h-5 w-5"})})]}),(0,t.jsx)("div",{className:"p-4 border-b",children:(0,t.jsx)(M,{})}),(0,t.jsx)("nav",{className:"flex-1 space-y-2 p-4",children:c.map(e=>(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h3",{className:"px-2 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:e.name}),e.items.map(e=>{let a=i===e.href||i.startsWith(e.href+"/"),r=e.icon;return(0,t.jsxs)(w(),{href:e.href,className:(0,f.cn)("flex items-center gap-3 rounded-md px-2 py-2 text-sm font-medium transition-colors",a?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),onClick:n,children:[(0,t.jsx)(r,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"flex-1",children:e.name}),e.badge&&(0,t.jsx)(v.E,{variant:"secondary",className:"ml-auto",children:e.badge})]},e.name)})]},e.name))}),(0,t.jsx)("div",{className:"border-t p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"h-8 w-8 rounded-full bg-primary flex items-center justify-center text-primary-foreground text-sm font-medium",children:[null==(a=l.first_name)?void 0:a[0],null==(r=l.last_name)?void 0:r[0]]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("p",{className:"text-sm font-medium truncate",children:[l.first_name," ",l.last_name]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground capitalize",children:o.replace("_"," ")})]})]})})]})]})}function I(e){let{children:a}=e,[r,n]=(0,s.useState)(!1),{user:i,loading:l}=(0,y.A)();return((0,s.useEffect)(()=>{n(!1)},[]),(0,s.useEffect)(()=>{let e=()=>{window.innerWidth>=1024&&n(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),l||!i)?(0,t.jsx)("div",{className:"h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):(0,t.jsxs)("div",{className:"h-full bg-background",children:[(0,t.jsx)(O,{isOpen:r,onClose:()=>n(!1)}),(0,t.jsxs)("div",{className:"lg:pl-72",children:[(0,t.jsx)(j,{onMenuToggle:()=>n(!0)}),(0,t.jsx)("main",{className:"crm-main-content",children:(0,t.jsx)("div",{className:"mobile-container py-6",children:a})})]})]})}function L(e){let{children:a,requiredRoles:r,requiredPermissions:n,redirectTo:i="/auth/login",requireOwner:l=!1,requireAdmin:o=!1}=e,{user:d,hasRole:c,hasPermission:u,isOwner:m,isAdmin:h,loading:f}=(0,y.A)(),x=(0,N.useRouter)();return((0,s.useEffect)(()=>{if(!f){if(!d)return void x.push(i);if(l&&!m||o&&!h||r&&!c(r)||n&&!n.every(e=>{let{resource:a,action:r}=e;return u(a,r)}))return void x.push("/dashboard")}},[d,c,u,m,h,f,x,i,l,o,r,n]),f)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):d&&(!l||m)&&(!o||h)&&(!r||c(r))&&(!n||n.every(e=>{let{resource:a,action:r}=e;return u(a,r)}))?(0,t.jsx)(t.Fragment,{children:a}):null}function D(e){let{children:a}=e;return(0,t.jsx)(L,{children:(0,t.jsx)(I,{children:a})})}},1169:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(1847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},1647:(e,a,r)=>{"use strict";r.d(a,{E:()=>l});var t=r(5155);r(2115);var s=r(3101),n=r(4269);let i=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:a,variant:r,...s}=e;return(0,t.jsx)("div",{className:(0,n.cn)(i({variant:r}),a),...s})}},1847:(e,a,r)=>{"use strict";r.d(a,{A:()=>o});var t=r(2115);let s=e=>{let a=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,r)=>r?r.toUpperCase():a.toLowerCase());return a.charAt(0).toUpperCase()+a.slice(1)},n=function(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return a.filter((e,a,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===a).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,t.forwardRef)((e,a)=>{let{color:r="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:u,...m}=e;return(0,t.createElement)("svg",{ref:a,...i,width:s,height:s,stroke:r,strokeWidth:o?24*Number(l)/Number(s):l,className:n("lucide",d),...!c&&!(e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[a,r]=e;return(0,t.createElement)(a,r)}),...Array.isArray(c)?c:[c]])}),o=(e,a)=>{let r=(0,t.forwardRef)((r,i)=>{let{className:o,...d}=r;return(0,t.createElement)(l,{ref:i,iconNode:a,className:n("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...d})});return r.displayName=s(e),r}},2545:(e,a,r)=>{"use strict";r.d(a,{AuthProvider:()=>d,A:()=>o});var t=r(5155),s=r(2115),n=r(7559);let i=()=>(0,n.createBrowserClient)("https://temp.supabase.co","temp-key");i();let l=(0,s.createContext)(null);function o(){let e=(0,s.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}function d(e){let{children:a}=e,[r,n]=(0,s.useState)(null),[o,d]=(0,s.useState)(null),[c,u]=(0,s.useState)(null),[m,h]=(0,s.useState)(!0),f=i(),x=async e=>{if(!e){n(null),u(null),h(!1);return}try{let{data:a,error:r}=await f.from("users").select("\n          *,\n          organization:organizations(*)\n        ").eq("id",e.id).single();if(r){console.error("Error loading user data:",r),h(!1);return}if(!a)return void h(!1);let t=a.organization?[{id:a.organization.id,name:a.organization.name,slug:a.organization.slug,role:a.role,is_active:!0}]:[],s=a.organization||null,i={...a,organizations:t,current_organization:s};n(i),u(s),d(e),s&&localStorage.setItem("current_organization_id",s.id)}catch(e){console.error("Error in loadUserData:",e)}finally{h(!1)}};(0,s.useEffect)(()=>{(async()=>{let{data:{session:e}}=await f.auth.getSession();await x((null==e?void 0:e.user)||null)})();let{data:{subscription:e}}=f.auth.onAuthStateChange(async(e,a)=>{"SIGNED_IN"===e||"TOKEN_REFRESHED"===e?await x((null==a?void 0:a.user)||null):"SIGNED_OUT"===e&&(n(null),d(null),u(null),localStorage.removeItem("current_organization_id"),h(!1))});return()=>{e.unsubscribe()}},[]);let g=async(e,a)=>{let{error:r}=await f.auth.signInWithPassword({email:e,password:a});return{error:r}},p=async()=>{let{error:e}=await f.auth.signOut();e&&console.error("Error signing out:",e)},v=async(e,a,r)=>{let{error:t}=await f.auth.signUp({email:e,password:a,options:{data:r}});return{error:t}},y=async e=>{var a;if(!r)return;if(!(null==(a=r.organizations)?void 0:a.find(a=>a.id===e)))throw Error("Organization not found in user organizations");let{error:t}=await f.from("users").update({organization_id:e}).eq("id",r.id);if(t)throw console.error("Error switching organization:",t),t;await j()},j=async()=>{o&&await x(o)},b=(null==r?void 0:r.role)==="owner",w=(null==r?void 0:r.is_admin)===!0||b,N=(null==r?void 0:r.role)||null,k=(null==r?void 0:r.organizations)||[];return(0,t.jsx)(l.Provider,{value:{user:r,supabaseUser:o,currentOrganization:c,currentRole:N,organizations:k,loading:m,signIn:g,signOut:p,signUp:v,switchOrganization:y,refreshUser:j,hasPermission:(e,a)=>{if(!r||!r.role)return!1;if("owner"===r.role)return!0;let t={owner:["*"],operations_manager:["users:create","users:read","users:update","contacts:create","contacts:read","contacts:update","leads:read","leads:update","jobs:read","jobs:update","estimates:read"],sales_manager:["contacts:create","contacts:read","contacts:update","leads:create","leads:read","leads:update","jobs:read","estimates:read"],estimating_manager:["contacts:read","leads:read","leads:update","jobs:read","estimates:create","estimates:read","estimates:update"],estimator:["contacts:read","leads:read","leads:update","estimates:create","estimates:read","estimates:update"],field_management:["contacts:read","jobs:read","jobs:update"]}[r.role]||[],s="".concat(e,":").concat(a);return t.includes("*")||t.includes(s)},hasRole:e=>!!r&&!!r.role&&(Array.isArray(e)?e:[e]).includes(r.role),isOwner:b,isAdmin:w},children:a})}},3998:(e,a,r)=>{"use strict";r.d(a,{$:()=>d});var t=r(5155),s=r(2115),n=r(6673),i=r(3101),l=r(4269);let o=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,a)=>{let{className:r,variant:s,size:i,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,t.jsx)(u,{className:(0,l.cn)(o({variant:s,size:i,className:r})),ref:a,...c})});d.displayName="Button"},4269:(e,a,r)=>{"use strict";r.d(a,{cn:()=>n});var t=r(2821),s=r(5889);function n(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,s.QP)((0,t.$)(a))}},5142:(e,a,r)=>{"use strict";r.d(a,{p:()=>i});var t=r(5155),s=r(2115),n=r(4269);let i=s.forwardRef((e,a)=>{let{className:r,type:s,...i}=e;return(0,t.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:a,...i})});i.displayName="Input"},6485:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(1847).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6583:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(1847).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},6751:(e,a,r)=>{Promise.resolve().then(r.bind(r,857))},9633:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(1847).A)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},9715:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(1847).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])}},e=>{e.O(0,[619,559,125,441,255,358],()=>e(e.s=6751)),_N_E=e.O()}]);